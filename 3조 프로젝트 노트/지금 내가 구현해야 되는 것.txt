지금 내가 구현해야 되는 것



=================================================

로그인, 유저 인증 구현 (V)

장고를 통한 superuser는 별도의 이름과 장르가 없다. admin은 관리용 계정이기 때문

일반 유저의 회원가입은 ID, PD, Email, 이름, 장르 checkbox를 기입하여 이뤄진다.

그럼 checkbox의 정보를 어떻게 DB로 보낼 것인가?

뚝딱거리다보니 일단 알아냈다.

================================================

중복 아이디 검사 기능 (V)

현재는 아이디를 중복하여 넣으면 오류페이지가 연결된다. 본래 서비스라면 그래선 안될 터, 따라서 아이디 중복 검사를 구현해야만 한다.

중복검사는 작동한다. 그러나 여전히 중복 아이디 넣고 가입하려하면 오류 메세지를 뿜는 문제가 있다.

================================================

슬라이드쇼 구현하기 (V)

앨범 이미지를 슬라이드하는 기능


현재 문제 :

버튼을 누르면 모든 앨범이 다함께 움직이는 문제가 있다.
이것은 querySelectorAll로 back, nextbtn 클래스를 죄다 가져오기 때문이다. 따라서 해당 클래스를 지닌 버튼들은 모두 다같이 영향을 받는 것이다.

설계된 html 페이지의 문제 :

1. 로그인 중인 사람이 고른 장르 수에 따라 페이지를 로드 시키는 문제.
장르 수가 0개일 경우 아무 페이지도 뜨지 않는다. 반대로 모든 장르를 골랐다면 모든 장르가 죄다 출력된다.

이런 방식은 버튼을 따로 지정하는 것을 힘들게 한다. (물론 방법이 있을 수도 있겠지만) 현재로서는 잘 모르겠다.


해결법 생각하기 :

같은 레이아웃의 html을 이어붙이고 버튼 id를 다르게 주는 방법이 있다. 버튼마다 클래스는 같으니 CSS는 그렇다 치더라도, id로 구별하게 만든다면 자바스크립트에 id만 다르게 넣어 원하는 곳만 움직이게 만들면 될 것이다.

버튼에 제각기 실행함수를 달아주는 방법도 있다. 특정 버튼을 클릭했을 때만 함수가 실행되도록 하는 것이다. 그러면 스크립트를 줄일 수 있을까?

장르별로 움직이게 하려면 도대체 어떻게 해야 하는가?

버튼마다 id를 따로 주나? => 그럼 다른 버튼마다 스크립트 하나씩 만들어야 될 것이다.


알고보니 쉬운 거였다. 일단 recom-group을 묶고 forEach를 이용해 각 클래스를 recom-group으로 구분하면 되는 거였다. 애니메이션 기능도 css랑 자바스크립트로 일단 해결됬다.

=================================================

html로 여러 값을 돌려주려면? 리스트로 묶어서 돌려주면 된다. (V)
파이썬 리스트로 묶으면 ~~~.0 번째 인덱스, ~~~~.1번째 인덱스 이런 식으로 자료를 뽑을 수 있다.

그렇다면 for문을 돌렸을 때 .0번째 자료, .1번째 자료도 같이 출력할 수 있을까?

where 조건문을 사용하려면 pymysql을 import해서 쓰면 되려나?

유저의 id는 어떻게 인증할 것인가? 현재 로그인 중인 유저의 id 넘버는 어떻게 확인하는가?

mysqlsearcher 안에서도 if user.is_authentificated가 가능한가?

======================

현재 프로그램 구조 : recommend로 들어가면 유저가 인증되어있을 경우, selectGenre 함수에 user_id를 매개변수로 넣어 genre_list로 돌려받는다. 이것은 유저가 갖고 있는 각각의 장르들을 리스트 형태로 돌려준다.

23년 10월 20일 11시 53분 기준, 구현 실패. 아직 프로그램 구조를 하나도 모르겠다. 뭐가 어떻게 돌아가는지도...

request.user.id = 현재 로그인 중인 유저의 id를 가져온다. luen2로 로그인했다면 2가 될 것이다.

그걸 user_id 변수에 넣는다. 원래라면 2가 제대로 들어가야하지만 django에서는 오류가 난다.

일단 앨범 장르만 검색해 넘겨주는건 성공.

그럼 넘겨준 데이터 중 장르를 어떻게 순서대로 노출시킬 것인가?

순서대로 노출시키려면 user_genre_list에서 .0, .1, .2 이런 식으로 뽑아 앨범에서 검색시키면 된다. 장르명 노출도 같은 방식으로 할 수 있다.

===============================

현재 html은 모든 DB 자료가 넘어온 recom_albums에서 if 조건문을 통해 임시로 장르만 노출시키고 있다. 이것은 임시조치로, 원래라면 좋아하는 장르 순서대로 와야할 터이다.

생각나는 것부터 적어본다.

DB의 자료를 애초에 모두 가져와 유저의 선호장르 정보를 리스트로 묶어 같이 넘긴다. 그럼 어떤 식으로 자료가 전송될까?

현재 views는 유저 id를 가져와 id가 일치하는 행의 장르 정보만 가져온다.
가져온 장르를 split하여 나누면 그게 장르 리스트이다.

만약 

===============================

마우스 올렸을 때 CSS 다듬기 (V)

class = event2 hover 했을 때 그나마 가장 비슷하게 구현할 수 있는 것을 찾았다.

그렇다면 recom_item에 hover를 줘야 하나, album_info에 hover를 줘야할까?

예제의 구조:

div class="event2"
    div class="imgBox"
        div class="hoverBox"
            span
                p class="p1" title
                p class="p2" 흑백+블러

대략 많은 div와 span으로 감싸져있다.


================================

좋아요 클릭하면 앨범 id와 (X) 트랙 전달 

좋아요는 현재 모든 앨범 사진 개수에 맞춰 출력된 상태다. 좋아요를 클릭했을 때 해당 앨범의 id를 검색하여 DB에 저장해야 할텐데, 그걸 어떻게 구현해야 할 것인가.

준영님께서 만든 detail 함수가 무슨 일을 하는지 알아내야겠다.

1. get object or 404를 통해 받은 album_id 값을 Albums 테이블의 기본키와 연결시킨다.

2. songs는 sp.album_tracks에 담아 album_id로 검색, 'items'로 담아온다.
songs_data라는 빈 리스트를 하나 만든다.

3. 각 노래 정보를 저장할 딕셔너리를 만들고 track_id, track_name, track_artist, track_preview를 담는다.모든 정보를 song이란 변수에 담고 songs_data에 추가한다.
장르는 문자열이기에 문자 제외한 부분 제거 후 리스트로 저장해 담는다.

4. context에서 앨범, 곡 정보, 장르를 빼와 detail.html로 돌려준다.

함수 뜯어본 결과 DB에 track 정보를 저장하진 않더라. 저장 기능은 audio_feature로 만들 생각이었나보다.

상세페이지랑 연결시키기

아! 애초에 Albums 테이블을 검색하여 가져올 때 Album_id도 노출시키지 않았지, 다 가져온다. 그걸 이용하면 되지 않을까?

==================================

회원정보 페이지

정보 수정 기능 구현 (X)

회원정보 수정 페이지는 어떻게 접근시키는가?

이런 구조를 짜려고 한다. 비밀번호를 입력시키고 비번이 맞으면 정보를 수정할 수 있게 하는 것이다.

그러려면 비번 입력창 하나, 입력값이 맞다면 user_update.html로 이동시키고 아니라면 현재 페이지를 유지해야 한다.

임의로 views에 추가할 논리구조를 짜보자.

def user_


=====================================

장르별 트랙 뽑을 건데, 준영님께서 jpop kpop latin r&b rock

나는 나머지 5개의 track 정보를 뽑는다.

Sweet Love	Anita Baker 미리듣기 정보 없음. 칼럼 제거 필요


jazz 완료.
alternative 완료
